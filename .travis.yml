language: php

matrix:
 include:
  - php: 5.3
    env: WP_VERSION=latest WP_MULTISITE=1 DEPLOY_AFTER=TRUE
  - php: 5.6
    env: WP_VERSION=latest WP_MULTISITE=1
 allow_failures:
  - php: hhvm
    env: WP_VERSION=latest WP_MULTISITE=1

before_script:
 - composer install
 - bash setup-testenv.sh wordpress_test root '' localhost $WP_VERSION
 - npm install -g grunt-cli
 - npm install
 - grunt build

script: phpunit

after_success:
 - grunt dist
 - if [[ "$DEPLOY_AFTER" == "TRUE" ]] ; then ls "curl --ftp-create-dirs -T ./dist/muneco.zip -u $FTP_U:$FTP_P ftp://$FTP_D/muneco.zip"; fi
